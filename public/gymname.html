<!DOCTYPE html>
<html>

<head>
    <title>B-Hub</title>
    <meta name="viewport" content="width=device-width,  initial-scale=1.0">
    <link rel="stylesheet" href="css/bhub.css" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
</head>

<body>
    <div id="splash">
        <img style="filter: blur(7px); -webkit-filter: blur(7px);" src="images/b_hub_logo.png" />
    </div>
    <div
        style="width: 100%; height: 100%; position: fixed; background-image: linear-gradient(to bottom, #000000cc, black);">
    </div>
    <form>
        <div style="width: 100%; overflow: hidden; overflow-y: scroll;">
            <h2
                style="position: relative; color: white; top: 60px; margin-left: 20px; margin-right: 47px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 24px;">
                GYM name and address</h2>
            <p
                style="position: relative; margin-top: 80px; margin-left: 20px; margin-right: 50px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 15px; color: white;">
                Create your account to help us publish your business to customer, registration is free</p>
            <p
                style="position: relative; margin-top: 30px; margin-left: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 700; font-size: 15px; color: rgb(196, 194, 194);">
                Enter GYM name and address*</p>
            <div style="position: relative;  margin-top: 10px; margin-left: 20px; margin-right: 20px;">
                <input type="text" placeholder="Gym name here ..." required id="input-email" />
            </div>
            <div style="position: relative; display: flex;  margin-top: 80px; margin-left: 20px; margin-right: 20px;">
                <input type="text" placeholder="Gym address here ..." required id="input-area" />
            </div>

            <div style="position: relative; display: flex;  margin-top: 90px; margin-left: 20px; margin-right: 20px;">
                <button type="submit" id="submit-btn" style="border: none; outline: none;">Continue</button>
            </div>
        </div>
    </form>
    <div style="width: 100%; height: 60px; background-color: black; position: fixed; top: 0%;">
        <span id="close-window-btn" class="material-symbols-outlined">arrow_back</span>
    </div>
    <dialog id="alert-dialog">
        <div style="height: 100%;">
            <li style="position: relative; list-style-type: none; font-size: 17px; font-weight: 700;">Alert!</li>
            <li id="dlg-text">Gym name and address are required!</li>
            <div style="position: relative; margin-top: 20px; align-items: end; justify-content: end; display: flex;">
                <li id="dialog-yes-btn" onclick="closeDlg()">OK</li>
            </div>
        </div>
    </dialog>
    <script src="js/index.js"></script>
    <script>
        let db = firebase.firestore();
        let alertDlg = document.getElementById('alert-dialog');
        let form = document.querySelector("form");
        let salonCat = "";
        let userId = "";

        firebase.auth().onAuthStateChanged(function (user) {
            if(user) {
                userId = user.uid;
            }
        });

        document.getElementById('close-window-btn').addEventListener('click', (e) => {
            window.close();
        });

        form.addEventListener(
            "submit",
            (event) => {
                const name = document.getElementById('input-email').value;
                const address = document.getElementById('input-area').value;

                var map = {
                    name: name,
                    location: address
                }
                db.collection("BHub").doc(userId).update(map).then( function() {
                    window.close();
                    window.open("gymservices.html");
                });
                event.preventDefault();
            },
            false,
        );
    </script>
</body>

</html>